{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\nvar _reactJsxRuntime = require(\"react/jsx-runtime\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || Object.assign || function (t) {\n  for (var s, i = 1, n = arguments.length; i < n; i++) {\n    s = arguments[i];\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n  }\n  return t;\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar React = require(\"react\");\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar react_native_image_pan_zoom_1 = require(\"react-native-image-pan-zoom\");\nvar image_viewer_style_1 = require(\"./image-viewer.style\");\nvar image_viewer_type_1 = require(\"./image-viewer.type\");\nvar ImageViewer = function (_super) {\n  __extends(ImageViewer, _super);\n  function ImageViewer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = new image_viewer_type_1.State();\n    _this.fadeAnim = new react_native_1.Animated.Value(0);\n    _this.standardPositionX = 0;\n    _this.positionXNumber = 0;\n    _this.positionX = new react_native_1.Animated.Value(0);\n    _this.width = 0;\n    _this.height = 0;\n    _this.styles = image_viewer_style_1.default(0, 0, 'transparent');\n    _this.hasLayout = false;\n    _this.loadedIndex = new Map();\n    _this.handleLongPressWithIndex = new Map();\n    _this.imageRefs = [];\n    _this.resetImageByIndex = function (index) {\n      _this.imageRefs[index] && _this.imageRefs[index].reset();\n    };\n    _this.preloadImage = function (index) {\n      if (index < _this.state.imageSizes.length) {\n        _this.loadImage(index + 1);\n      }\n    };\n    _this.handleHorizontalOuterRangeOffset = function (offsetX) {\n      if (offsetX === void 0) {\n        offsetX = 0;\n      }\n      _this.positionXNumber = _this.standardPositionX + offsetX;\n      _this.positionX.setValue(_this.positionXNumber);\n      var offsetXRTL = !react_native_1.I18nManager.isRTL ? offsetX : -offsetX;\n      if (offsetXRTL < 0) {\n        if (_this.state.currentShowIndex || 0 < _this.props.imageUrls.length - 1) {\n          _this.loadImage((_this.state.currentShowIndex || 0) + 1);\n        }\n      } else if (offsetXRTL > 0) {\n        if (_this.state.currentShowIndex || 0 > 0) {\n          _this.loadImage((_this.state.currentShowIndex || 0) - 1);\n        }\n      }\n    };\n    _this.handleResponderRelease = function (vx) {\n      if (vx === void 0) {\n        vx = 0;\n      }\n      var vxRTL = react_native_1.I18nManager.isRTL ? -vx : vx;\n      var isLeftMove = react_native_1.I18nManager.isRTL ? _this.positionXNumber - _this.standardPositionX < -(_this.props.flipThreshold || 0) : _this.positionXNumber - _this.standardPositionX > (_this.props.flipThreshold || 0);\n      var isRightMove = react_native_1.I18nManager.isRTL ? _this.positionXNumber - _this.standardPositionX > (_this.props.flipThreshold || 0) : _this.positionXNumber - _this.standardPositionX < -(_this.props.flipThreshold || 0);\n      if (vxRTL > 0.7) {\n        _this.goBack.call(_this);\n        if (_this.state.currentShowIndex || 0 > 0) {\n          _this.loadImage((_this.state.currentShowIndex || 0) - 1);\n        }\n        return;\n      } else if (vxRTL < -0.7) {\n        _this.goNext.call(_this);\n        if (_this.state.currentShowIndex || 0 < _this.props.imageUrls.length - 1) {\n          _this.loadImage((_this.state.currentShowIndex || 0) + 1);\n        }\n        return;\n      }\n      if (isLeftMove) {\n        _this.goBack.call(_this);\n      } else if (isRightMove) {\n        _this.goNext.call(_this);\n        return;\n      } else {\n        _this.resetPosition.call(_this);\n        return;\n      }\n    };\n    _this.goBack = function () {\n      if (_this.state.currentShowIndex === 0) {\n        _this.resetPosition.call(_this);\n        return;\n      }\n      _this.positionXNumber = !react_native_1.I18nManager.isRTL ? _this.standardPositionX + _this.width : _this.standardPositionX - _this.width;\n      _this.standardPositionX = _this.positionXNumber;\n      react_native_1.Animated.timing(_this.positionX, {\n        toValue: _this.positionXNumber,\n        duration: _this.props.pageAnimateTime,\n        useNativeDriver: !!_this.props.useNativeDriver\n      }).start();\n      var nextIndex = (_this.state.currentShowIndex || 0) - 1;\n      _this.setState({\n        currentShowIndex: nextIndex\n      }, function () {\n        if (_this.props.onChange) {\n          _this.props.onChange(_this.state.currentShowIndex);\n        }\n      });\n    };\n    _this.goNext = function () {\n      if (_this.state.currentShowIndex === _this.props.imageUrls.length - 1) {\n        _this.resetPosition.call(_this);\n        return;\n      }\n      _this.positionXNumber = !react_native_1.I18nManager.isRTL ? _this.standardPositionX - _this.width : _this.standardPositionX + _this.width;\n      _this.standardPositionX = _this.positionXNumber;\n      react_native_1.Animated.timing(_this.positionX, {\n        toValue: _this.positionXNumber,\n        duration: _this.props.pageAnimateTime,\n        useNativeDriver: !!_this.props.useNativeDriver\n      }).start();\n      var nextIndex = (_this.state.currentShowIndex || 0) + 1;\n      _this.setState({\n        currentShowIndex: nextIndex\n      }, function () {\n        if (_this.props.onChange) {\n          _this.props.onChange(_this.state.currentShowIndex);\n        }\n      });\n    };\n    _this.handleLongPress = function (image) {\n      if (_this.props.saveToLocalByLongPress) {\n        _this.setState({\n          isShowMenu: true\n        });\n      }\n      if (_this.props.onLongPress) {\n        _this.props.onLongPress(image);\n      }\n    };\n    _this.handleClick = function () {\n      if (_this.props.onClick) {\n        _this.props.onClick(_this.handleCancel, _this.state.currentShowIndex);\n      }\n    };\n    _this.handleDoubleClick = function () {\n      if (_this.props.onDoubleClick) {\n        _this.props.onDoubleClick(_this.handleCancel);\n      }\n    };\n    _this.handleCancel = function () {\n      _this.hasLayout = false;\n      if (_this.props.onCancel) {\n        _this.props.onCancel();\n      }\n    };\n    _this.handleLayout = function (event) {\n      if (event.nativeEvent.layout.width !== _this.width) {\n        _this.hasLayout = true;\n        _this.width = event.nativeEvent.layout.width;\n        _this.height = event.nativeEvent.layout.height;\n        _this.styles = image_viewer_style_1.default(_this.width, _this.height, _this.props.backgroundColor || 'transparent');\n        _this.forceUpdate();\n        _this.jumpToCurrentImage();\n      }\n    };\n    _this.saveToLocal = function () {\n      if (!_this.props.onSave) {\n        react_native_1.CameraRoll.saveToCameraRoll(_this.props.imageUrls[_this.state.currentShowIndex || 0].url);\n        _this.props.onSaveToCamera(_this.state.currentShowIndex);\n      } else {\n        _this.props.onSave(_this.props.imageUrls[_this.state.currentShowIndex || 0].url);\n      }\n      _this.setState({\n        isShowMenu: false\n      });\n    };\n    _this.handleLeaveMenu = function () {\n      _this.setState({\n        isShowMenu: false\n      });\n    };\n    _this.handleSwipeDown = function () {\n      if (_this.props.onSwipeDown) {\n        _this.props.onSwipeDown();\n      }\n      _this.handleCancel();\n    };\n    return _this;\n  }\n  ImageViewer.prototype.componentDidMount = function () {\n    this.init(this.props);\n  };\n  ImageViewer.getDerivedStateFromProps = function (nextProps, prevState) {\n    if (nextProps.index !== prevState.prevIndexProp) {\n      return {\n        currentShowIndex: nextProps.index,\n        prevIndexProp: nextProps.index\n      };\n    }\n    return null;\n  };\n  ImageViewer.prototype.componentDidUpdate = function (prevProps, prevState) {\n    if (prevProps.index !== this.props.index) {\n      this.loadImage(this.props.index || 0);\n      this.jumpToCurrentImage();\n      react_native_1.Animated.timing(this.fadeAnim, {\n        toValue: 1,\n        duration: 200,\n        useNativeDriver: !!this.props.useNativeDriver\n      }).start();\n    }\n  };\n  ImageViewer.prototype.init = function (nextProps) {\n    var _this = this;\n    if (nextProps.imageUrls.length === 0) {\n      this.fadeAnim.setValue(0);\n      return this.setState(new image_viewer_type_1.State());\n    }\n    var imageSizes = [];\n    nextProps.imageUrls.forEach(function (imageUrl) {\n      imageSizes.push({\n        width: imageUrl.width || 0,\n        height: imageUrl.height || 0,\n        status: 'loading'\n      });\n    });\n    this.setState({\n      currentShowIndex: nextProps.index,\n      prevIndexProp: nextProps.index || 0,\n      imageSizes: imageSizes\n    }, function () {\n      _this.loadImage(nextProps.index || 0);\n      _this.jumpToCurrentImage();\n      react_native_1.Animated.timing(_this.fadeAnim, {\n        toValue: 1,\n        duration: 200,\n        useNativeDriver: !!nextProps.useNativeDriver\n      }).start();\n    });\n  };\n  ImageViewer.prototype.jumpToCurrentImage = function () {\n    this.positionXNumber = this.width * (this.state.currentShowIndex || 0) * (react_native_1.I18nManager.isRTL ? 1 : -1);\n    this.standardPositionX = this.positionXNumber;\n    this.positionX.setValue(this.positionXNumber);\n  };\n  ImageViewer.prototype.loadImage = function (index) {\n    var _this = this;\n    if (!this.state.imageSizes[index]) {\n      return;\n    }\n    if (this.loadedIndex.has(index)) {\n      return;\n    }\n    this.loadedIndex.set(index, true);\n    var image = this.props.imageUrls[index];\n    var imageStatus = __assign({}, this.state.imageSizes[index]);\n    var saveImageSize = function saveImageSize() {\n      if (_this.state.imageSizes[index] && _this.state.imageSizes[index].status !== 'loading') {\n        return;\n      }\n      var imageSizes = _this.state.imageSizes.slice();\n      imageSizes[index] = imageStatus;\n      _this.setState({\n        imageSizes: imageSizes\n      });\n    };\n    if (this.state.imageSizes[index].status === 'success') {\n      return;\n    }\n    if (this.state.imageSizes[index].width > 0 && this.state.imageSizes[index].height > 0) {\n      imageStatus.status = 'success';\n      saveImageSize();\n      return;\n    }\n    var sizeLoaded = false;\n    var imageLoaded = false;\n    if (!image.url || image.url.startsWith(\"file:\")) {\n      imageLoaded = true;\n    }\n    if (image.width && image.height) {\n      if (this.props.enablePreload && imageLoaded === false) {\n        react_native_1.Image.prefetch(image.url);\n      }\n      imageStatus.width = image.width;\n      imageStatus.height = image.height;\n      imageStatus.status = 'success';\n      saveImageSize();\n      return;\n    }\n    react_native_1.Image.getSize(image.url, function (width, height) {\n      imageStatus.width = width;\n      imageStatus.height = height;\n      imageStatus.status = 'success';\n      saveImageSize();\n    }, function () {\n      try {\n        var data = react_native_1.Image.resolveAssetSource(image.props.source);\n        imageStatus.width = data.width;\n        imageStatus.height = data.height;\n        imageStatus.status = 'success';\n        saveImageSize();\n      } catch (newError) {\n        imageStatus.status = 'fail';\n        saveImageSize();\n      }\n    });\n  };\n  ImageViewer.prototype.resetPosition = function () {\n    this.positionXNumber = this.standardPositionX;\n    react_native_1.Animated.timing(this.positionX, {\n      toValue: this.standardPositionX,\n      duration: 150,\n      useNativeDriver: !!this.props.useNativeDriver\n    }).start();\n  };\n  ImageViewer.prototype.getContent = function () {\n    var _this = this;\n    var screenWidth = this.width;\n    var screenHeight = this.height;\n    var ImageElements = this.props.imageUrls.map(function (image, index) {\n      if ((_this.state.currentShowIndex || 0) > index + 1 || (_this.state.currentShowIndex || 0) < index - 1) {\n        return _reactJsxRuntime.jsx(react_native_1.View, {\n          style: {\n            width: screenWidth,\n            height: screenHeight\n          }\n        }, index);\n      }\n      if (!_this.handleLongPressWithIndex.has(index)) {\n        _this.handleLongPressWithIndex.set(index, _this.handleLongPress.bind(_this, image));\n      }\n      var width = _this.state.imageSizes[index] && _this.state.imageSizes[index].width;\n      var height = _this.state.imageSizes[index] && _this.state.imageSizes[index].height;\n      var imageInfo = _this.state.imageSizes[index];\n      if (!imageInfo || !imageInfo.status) {\n        return _reactJsxRuntime.jsx(react_native_1.View, {\n          style: {\n            width: screenWidth,\n            height: screenHeight\n          }\n        }, index);\n      }\n      if (width > screenWidth) {\n        var widthPixel = screenWidth / width;\n        width *= widthPixel;\n        height *= widthPixel;\n      }\n      if (height > screenHeight) {\n        var HeightPixel = screenHeight / height;\n        width *= HeightPixel;\n        height *= HeightPixel;\n      }\n      var Wrapper = function Wrapper(_a) {\n        var children = _a.children,\n          others = __rest(_a, [\"children\"]);\n        return _reactJsxRuntime.jsx(react_native_image_pan_zoom_1.default, _objectSpread(_objectSpread({\n          cropWidth: _this.width,\n          cropHeight: _this.height,\n          maxOverflow: _this.props.maxOverflow,\n          horizontalOuterRangeOffset: _this.handleHorizontalOuterRangeOffset,\n          responderRelease: _this.handleResponderRelease,\n          onMove: _this.props.onMove,\n          onLongPress: _this.handleLongPressWithIndex.get(index),\n          onClick: _this.handleClick,\n          onDoubleClick: _this.handleDoubleClick,\n          enableSwipeDown: _this.props.enableSwipeDown,\n          swipeDownThreshold: _this.props.swipeDownThreshold,\n          onSwipeDown: _this.handleSwipeDown,\n          pinchToZoom: _this.props.enableImageZoom,\n          enableDoubleClickZoom: _this.props.enableImageZoom,\n          doubleClickInterval: _this.props.doubleClickInterval\n        }, others), {}, {\n          children: children\n        }));\n      };\n      switch (imageInfo.status) {\n        case 'loading':\n          return _reactJsxRuntime.jsx(Wrapper, {\n            style: __assign({}, _this.styles.modalContainer, _this.styles.loadingContainer),\n            imageWidth: screenWidth,\n            imageHeight: screenHeight,\n            children: _reactJsxRuntime.jsx(react_native_1.View, {\n              style: _this.styles.loadingContainer,\n              children: _this.props.loadingRender()\n            })\n          }, index);\n        case 'success':\n          if (!image.props) {\n            image.props = {};\n          }\n          if (!image.props.style) {\n            image.props.style = {};\n          }\n          image.props.style = __assign({}, _this.styles.imageStyle, image.props.style, {\n            width: width,\n            height: height\n          });\n          if (typeof image.props.source === 'number') {} else {\n            if (!image.props.source) {\n              image.props.source = {};\n            }\n            image.props.source = __assign({\n              uri: image.url\n            }, image.props.source);\n          }\n          if (_this.props.enablePreload) {\n            _this.preloadImage(_this.state.currentShowIndex || 0);\n          }\n          return _reactJsxRuntime.jsx(react_native_image_pan_zoom_1.default, {\n            ref: function ref(el) {\n              return _this.imageRefs[index] = el;\n            },\n            cropWidth: _this.width,\n            cropHeight: _this.height,\n            maxOverflow: _this.props.maxOverflow,\n            horizontalOuterRangeOffset: _this.handleHorizontalOuterRangeOffset,\n            responderRelease: _this.handleResponderRelease,\n            onMove: _this.props.onMove,\n            onLongPress: _this.handleLongPressWithIndex.get(index),\n            onClick: _this.handleClick,\n            onDoubleClick: _this.handleDoubleClick,\n            imageWidth: width,\n            imageHeight: height,\n            enableSwipeDown: _this.props.enableSwipeDown,\n            swipeDownThreshold: _this.props.swipeDownThreshold,\n            onSwipeDown: _this.handleSwipeDown,\n            panToMove: !_this.state.isShowMenu,\n            pinchToZoom: _this.props.enableImageZoom && !_this.state.isShowMenu,\n            enableDoubleClickZoom: _this.props.enableImageZoom && !_this.state.isShowMenu,\n            doubleClickInterval: _this.props.doubleClickInterval,\n            minScale: _this.props.minScale,\n            maxScale: _this.props.maxScale,\n            children: _this.props.renderImage(image.props)\n          }, index);\n        case 'fail':\n          return _reactJsxRuntime.jsx(Wrapper, {\n            style: _this.styles.modalContainer,\n            imageWidth: _this.props.failImageSource ? _this.props.failImageSource.width : screenWidth,\n            imageHeight: _this.props.failImageSource ? _this.props.failImageSource.height : screenHeight,\n            children: _this.props.failImageSource && _this.props.renderImage({\n              source: {\n                uri: _this.props.failImageSource.url\n              },\n              style: {\n                width: _this.props.failImageSource.width,\n                height: _this.props.failImageSource.height\n              }\n            })\n          }, index);\n      }\n    });\n    return _reactJsxRuntime.jsx(react_native_1.Animated.View, {\n      style: {\n        zIndex: 9\n      },\n      children: _reactJsxRuntime.jsxs(react_native_1.Animated.View, {\n        style: __assign({}, this.styles.container, {\n          opacity: this.fadeAnim\n        }),\n        children: [this.props.renderHeader(this.state.currentShowIndex), _reactJsxRuntime.jsx(react_native_1.View, {\n          style: this.styles.arrowLeftContainer,\n          children: _reactJsxRuntime.jsx(react_native_1.TouchableWithoutFeedback, {\n            onPress: this.goBack,\n            children: _reactJsxRuntime.jsx(react_native_1.View, {\n              children: this.props.renderArrowLeft()\n            })\n          })\n        }), _reactJsxRuntime.jsx(react_native_1.View, {\n          style: this.styles.arrowRightContainer,\n          children: _reactJsxRuntime.jsx(react_native_1.TouchableWithoutFeedback, {\n            onPress: this.goNext,\n            children: _reactJsxRuntime.jsx(react_native_1.View, {\n              children: this.props.renderArrowRight()\n            })\n          })\n        }), _reactJsxRuntime.jsx(react_native_1.Animated.View, {\n          style: __assign({}, this.styles.moveBox, {\n            transform: [{\n              translateX: this.positionX\n            }],\n            width: this.width * this.props.imageUrls.length\n          }),\n          children: ImageElements\n        }), this.props.renderIndicator((this.state.currentShowIndex || 0) + 1, this.props.imageUrls.length), this.props.imageUrls[this.state.currentShowIndex || 0] && this.props.imageUrls[this.state.currentShowIndex || 0].originSizeKb && this.props.imageUrls[this.state.currentShowIndex || 0].originUrl && _reactJsxRuntime.jsx(react_native_1.View, {\n          style: this.styles.watchOrigin,\n          children: _reactJsxRuntime.jsx(react_native_1.TouchableOpacity, {\n            style: this.styles.watchOriginTouchable,\n            children: _reactJsxRuntime.jsx(react_native_1.Text, {\n              style: this.styles.watchOriginText,\n              children: \"\\u67E5\\u770B\\u539F\\u56FE(2M)\"\n            })\n          })\n        }), _reactJsxRuntime.jsx(react_native_1.View, {\n          style: [{\n            bottom: 0,\n            position: 'absolute',\n            zIndex: 9\n          }, this.props.footerContainerStyle],\n          children: this.props.renderFooter(this.state.currentShowIndex || 0)\n        })]\n      })\n    });\n  };\n  ImageViewer.prototype.getMenu = function () {\n    if (!this.state.isShowMenu) {\n      return null;\n    }\n    if (this.props.menus) {\n      return _reactJsxRuntime.jsx(react_native_1.View, {\n        style: this.styles.menuContainer,\n        children: this.props.menus({\n          cancel: this.handleLeaveMenu,\n          saveToLocal: this.saveToLocal\n        })\n      });\n    }\n    return _reactJsxRuntime.jsxs(react_native_1.View, {\n      style: this.styles.menuContainer,\n      children: [_reactJsxRuntime.jsx(react_native_1.View, {\n        style: this.styles.menuShadow\n      }), _reactJsxRuntime.jsxs(react_native_1.View, {\n        style: this.styles.menuContent,\n        children: [_reactJsxRuntime.jsx(react_native_1.TouchableHighlight, {\n          underlayColor: \"#F2F2F2\",\n          onPress: this.saveToLocal,\n          style: this.styles.operateContainer,\n          children: _reactJsxRuntime.jsx(react_native_1.Text, {\n            style: this.styles.operateText,\n            children: this.props.menuContext.saveToLocal\n          })\n        }), _reactJsxRuntime.jsx(react_native_1.TouchableHighlight, {\n          underlayColor: \"#F2F2F2\",\n          onPress: this.handleLeaveMenu,\n          style: this.styles.operateContainer,\n          children: _reactJsxRuntime.jsx(react_native_1.Text, {\n            style: this.styles.operateText,\n            children: this.props.menuContext.cancel\n          })\n        })]\n      })]\n    });\n  };\n  ImageViewer.prototype.render = function () {\n    var childs = null;\n    childs = _reactJsxRuntime.jsxs(react_native_1.View, {\n      children: [this.getContent(), this.getMenu()]\n    });\n    return _reactJsxRuntime.jsx(react_native_1.View, {\n      onLayout: this.handleLayout,\n      style: __assign({\n        flex: 1,\n        overflow: 'hidden'\n      }, this.props.style),\n      children: childs\n    });\n  };\n  ImageViewer.defaultProps = new image_viewer_type_1.Props();\n  return ImageViewer;\n}(React.Component);\nexports.default = ImageViewer;","map":{"version":3,"mappings":"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","names":["__extends","_this","image_viewer_type_1","react_native_1","Value","image_viewer_style_1","Map","index","imageRefs","reset","state","imageSizes","length","loadImage","offsetX","positionXNumber","standardPositionX","positionX","setValue","offsetXRTL","isRTL","currentShowIndex","props","imageUrls","vx","vxRTL","isLeftMove","flipThreshold","isRightMove","goBack","call","goNext","resetPosition","width","timing","toValue","duration","pageAnimateTime","useNativeDriver","start","nextIndex","setState","onChange","image","saveToLocalByLongPress","isShowMenu","onLongPress","onClick","handleCancel","onDoubleClick","hasLayout","onCancel","event","nativeEvent","layout","height","styles","backgroundColor","forceUpdate","jumpToCurrentImage","onSave","saveToCameraRoll","url","onSaveToCamera","onSwipeDown","ImageViewer","init","nextProps","prevState","prevIndexProp","prevProps","fadeAnim","forEach","push","imageUrl","status","loadedIndex","has","set","imageStatus","saveImageSize","slice","sizeLoaded","imageLoaded","startsWith","enablePreload","prefetch","getSize","data","resolveAssetSource","source","newError","screenWidth","screenHeight","ImageElements","map","handleLongPressWithIndex","handleLongPress","bind","imageInfo","widthPixel","HeightPixel","Wrapper","_a","others","maxOverflow","handleHorizontalOuterRangeOffset","handleResponderRelease","onMove","get","handleClick","handleDoubleClick","enableSwipeDown","swipeDownThreshold","handleSwipeDown","enableImageZoom","doubleClickInterval","children","__assign","modalContainer","loadingContainer","loadingRender","style","imageStyle","uri","preloadImage","el","minScale","maxScale","renderImage","failImageSource","zIndex","container","opacity","renderHeader","arrowLeftContainer","renderArrowLeft","arrowRightContainer","renderArrowRight","moveBox","transform","translateX","renderIndicator","originSizeKb","originUrl","watchOrigin","watchOriginTouchable","watchOriginText","bottom","position","footerContainerStyle","renderFooter","menus","menuContainer","cancel","handleLeaveMenu","saveToLocal","menuShadow","menuContent","operateContainer","operateText","menuContext","childs","getContent","getMenu","handleLayout","flex","overflow","React","Component"],"sourceRoot":"","sources":["../src/image-viewer.component.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}